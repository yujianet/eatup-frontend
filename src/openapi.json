{"openapi":"3.1.0","info":{"title":"FastAPI","version":"0.1.0"},"paths":{"/foods/":{"post":{"tags":["foods"],"summary":"Create Food","description":"创建食物","operationId":"create_food_foods__post","requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/FoodCreate"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"get":{"tags":["foods"],"summary":"获取食物列表（分页排序）","description":"支持排序字段：storage_time（入库时间）, expiry_days（保质期天数）, remaining_days（剩余天数）","operationId":"get_foods_foods__get","parameters":[{"name":"page","in":"query","required":false,"schema":{"type":"integer","default":1,"title":"Page"}},{"name":"page_size","in":"query","required":false,"schema":{"type":"integer","default":10,"title":"Page Size"}},{"name":"sort_by","in":"query","required":false,"schema":{"type":"string","default":"storage_time","title":"Sort By"}},{"name":"order","in":"query","required":false,"schema":{"type":"string","default":"desc","title":"Order"}},{"name":"include_deleted","in":"query","required":false,"schema":{"type":"boolean","default":false,"title":"Include Deleted"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/foods/upload":{"post":{"tags":["foods"],"summary":"Upload Image","operationId":"upload_image_foods_upload_post","requestBody":{"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/Body_upload_image_foods_upload_post"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/foods/{food_id}":{"get":{"tags":["foods"],"summary":"Get Food Detail","description":"获取单个食物详情","operationId":"get_food_detail_foods__food_id__get","parameters":[{"name":"food_id","in":"path","required":true,"schema":{"type":"integer","title":"Food Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/FoodResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"put":{"tags":["foods"],"summary":"Update Food","description":"更新指定食物","operationId":"update_food_foods__food_id__put","parameters":[{"name":"food_id","in":"path","required":true,"schema":{"type":"integer","title":"Food Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/FoodCreate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/FoodResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["foods"],"summary":"Delete Food","description":"删除指定食物","operationId":"delete_food_foods__food_id__delete","parameters":[{"name":"food_id","in":"path","required":true,"schema":{"type":"integer","title":"Food Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/foods/{food_id}/undo_delete":{"put":{"tags":["foods"],"summary":"Undo Delete Food","description":"撤销删除指定食物","operationId":"undo_delete_food_foods__food_id__undo_delete_put","parameters":[{"name":"food_id","in":"path","required":true,"schema":{"type":"integer","title":"Food Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/FoodResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/categories":{"get":{"tags":["categories"],"summary":"Get Categories","description":"获取所有分类（按大分类分组）","operationId":"get_categories_categories_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CategoriesResponse"}}}}}}},"/categories/upsert":{"post":{"tags":["categories"],"summary":"Upsert Category","description":"创建或更新分类","operationId":"upsert_category_categories_upsert_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CategoryUpsertRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}}},"components":{"schemas":{"Body_upload_image_foods_upload_post":{"properties":{"file":{"type":"string","format":"binary","title":"File"}},"type":"object","required":["file"],"title":"Body_upload_image_foods_upload_post"},"CategoriesResponse":{"properties":{"categories":{"additionalProperties":{"additionalProperties":{"type":"integer"},"type":"object"},"type":"object","title":"Categories"}},"type":"object","required":["categories"],"title":"CategoriesResponse"},"CategoryUpsertRequest":{"properties":{"large_category":{"type":"string","title":"Large Category"},"small_category":{"type":"string","title":"Small Category"},"expiry_days":{"type":"integer","title":"Expiry Days"}},"type":"object","required":["large_category","small_category","expiry_days"],"title":"CategoryUpsertRequest"},"FoodCreate":{"properties":{"name":{"type":"string","title":"Name","description":"食物名称"},"category_large":{"type":"string","title":"Category Large","description":"大分类名称","examples":["蔬菜"]},"category_small":{"type":"string","title":"Category Small","description":"小分类名称","examples":["叶菜"]},"expiry_days":{"type":"integer","title":"Expiry Days"},"photo_path":{"type":"string","title":"Photo Path"}},"type":"object","required":["name","category_large","category_small","expiry_days","photo_path"],"title":"FoodCreate"},"FoodResponse":{"properties":{"name":{"type":"string","title":"Name","description":"食物名称"},"category_large":{"type":"string","title":"Category Large","description":"大分类名称","examples":["蔬菜"]},"category_small":{"type":"string","title":"Category Small","description":"小分类名称","examples":["叶菜"]},"expiry_days":{"type":"integer","title":"Expiry Days"},"photo_path":{"type":"string","title":"Photo Path"},"id":{"type":"integer","title":"Id"},"storage_time":{"type":"string","format":"date-time","title":"Storage Time"},"remaining_days":{"type":"integer","title":"Remaining Days"}},"type":"object","required":["name","category_large","category_small","expiry_days","photo_path","id","storage_time","remaining_days"],"title":"FoodResponse"},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"}}}}